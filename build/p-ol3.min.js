function expose(){var o=window.P;P.noConflict=function(){return window.P=o,this},window.P=P}var COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(o){return void 0!==o},goog.exportPath_=function(o,t,e){var r=o.split("."),n=e||goog.global;r[0]in n||!n.execScript||n.execScript("var "+r[0]);for(var g;r.length&&(g=r.shift());)!r.length&&goog.isDef(t)?n[g]=t:n=n[g]?n[g]:n[g]={}},goog.define=function(o,t){var e=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,o)?e=goog.global.CLOSURE_UNCOMPILED_DEFINES[o]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,o)&&(e=goog.global.CLOSURE_DEFINES[o])),goog.exportPath_(o,e)},goog.DEBUG=!0,goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.provide=function(o){if(!COMPILED&&goog.isProvided_(o))throw Error('Namespace "'+o+'" already declared.');goog.constructNamespace_(o)},goog.constructNamespace_=function(o,t){if(!COMPILED){delete goog.implicitNamespaces_[o];for(var e=o;(e=e.substring(0,e.lastIndexOf(".")))&&!goog.getObjectByName(e);)goog.implicitNamespaces_[e]=!0}goog.exportPath_(o,t)},goog.module=function(o){if(!goog.isString(o)||!o)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+o+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=o,!COMPILED){if(goog.isProvided_(o))throw Error('Namespace "'+o+'" already declared.');delete goog.implicitNamespaces_[o]}},goog.module.get=function(o){return goog.module.getInternal_(o)},goog.module.getInternal_=function(o){return COMPILED?void 0:goog.isProvided_(o)?o in goog.loadedModules_?goog.loadedModules_[o]:goog.getObjectByName(o):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw new Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(o){if(COMPILED&&!goog.DEBUG)throw o=o||"",Error("Importing test-only code into non-debug environment"+(o?": "+o:"."))},goog.forwardDeclare=function(o){},COMPILED||(goog.isProvided_=function(o){return o in goog.loadedModules_||!goog.implicitNamespaces_[o]&&goog.isDefAndNotNull(goog.getObjectByName(o))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(o,t){for(var e,r=o.split("."),n=t||goog.global;e=r.shift();){if(!goog.isDefAndNotNull(n[e]))return null;n=n[e]}return n},goog.globalize=function(o,t){var e=t||goog.global;for(var r in o)e[r]=o[r]},goog.addDependency=function(o,t,e,r){if(goog.DEPENDENCIES_ENABLED){for(var n,g,s=o.replace(/\\/g,"/"),i=goog.dependencies_,a=0;n=t[a];a++)i.nameToPath[n]=s,i.pathIsModule[s]=!!r;for(var l=0;g=e[l];l++)s in i.requires||(i.requires[s]={}),i.requires[s][g]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(o){goog.global.console&&goog.global.console.error(o)},goog.require=function(o){if(!COMPILED){if(goog.isProvided_(o))return goog.isInModuleLoader_()?goog.module.getInternal_(o):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(o);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}var e="goog.require could not find: "+o;throw goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(o,t){return o},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(o){o.getInstance=function(){return o.instance_?o.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=o),o.instance_=new o)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var o=goog.global.document;return"undefined"!=typeof o&&"write"in o},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var o=goog.global.document,t=o.getElementsByTagName("script"),e=t.length-1;e>=0;--e){var r=t[e].src,n=r.lastIndexOf("?"),g=-1==n?r.length:n;if("base.js"==r.substr(g-7,7))return void(goog.basePath=r.substr(0,g-7))}},goog.importScript_=function(o,t){var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;e(o,t)&&(goog.dependencies_.written[o]=!0)},goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob,goog.importModule_=function(o){var t='goog.retrieveAndExecModule_("'+o+'");';goog.importScript_("",t)&&(goog.dependencies_.written[o]=!0)},goog.queuedModules_=[],goog.retrieveAndExecModule_=function(o){for(var t;-1!=(t=o.indexOf("/./"));)o=o.substr(0,t)+o.substr(t+"/.".length);for(;-1!=(t=o.indexOf("/../"));){var e=o.lastIndexOf("/",t-1);o=o.substr(0,e)+o.substr(t+"/..".length)}var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=null,g=new goog.global.XMLHttpRequest;if(g.onload=function(){n=this.responseText},g.open("get",o,!1),g.send(),n=g.responseText,null==n)throw new Error("load of "+o+"failed");var s=goog.wrapModule_(o,n),i=goog.IS_OLD_IE_;i?goog.queuedModules_.push(s):r(o,s),goog.dependencies_.written[o]=!0},goog.wrapModule_=function(o,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+o+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+o+"\n"},goog.loadQueuedModules_=function(){var o=goog.queuedModules_.length;if(o>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var e=0;o>e;e++){var r=t[e];goog.globalEval(r)}}},goog.loadModule=function(o){try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var t;if(goog.isFunction(o))t=o.call(goog.global,{});else{if(!goog.isString(o))throw Error("Invalid module definition");t=goog.loadModuleFromSource_.call(goog.global,o)}var e=goog.moduleLoaderState_.moduleName;if(!goog.isString(e)||!e)throw Error('Invalid module name "'+e+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(e,t):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(t),goog.loadedModules_[e]=t,goog.moduleLoaderState_.declareTestMethods)for(var r in t)(0===r.indexOf("test",0)||"tearDown"==r||"setup"==r)&&(goog.global[r]=t[r])}finally{goog.moduleLoaderState_=null}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptTag_=function(o,t){if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState){var r=/\bdeps.js$/.test(o);if(r)return!1;throw Error('Cannot write "'+o+'" after document load')}var n=goog.IS_OLD_IE_;if(void 0===t)if(n){var g=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";e.write('<script type="text/javascript" src="'+o+'"'+g+"></script>")}else e.write('<script type="text/javascript" src="'+o+'"></script>');else e.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(o,t){return"complete"==o.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function o(n){if(!(n in r.written)){if(n in r.visited)return void(n in e||(e[n]=!0,t.push(n)));if(r.visited[n]=!0,n in r.requires)for(var g in r.requires[n])if(!goog.isProvided_(g)){if(!(g in r.nameToPath))throw Error("Undefined nameToPath for "+g);o(r.nameToPath[g])}n in e||(e[n]=!0,t.push(n))}}var t=[],e={},r=goog.dependencies_;for(var n in goog.included_)r.written[n]||o(n);for(var g=0;g<t.length;g++){var n=t[g];goog.dependencies_.written[n]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var i=!1,g=0;g<t.length;g++){var n=t[g];if(!n)throw goog.moduleLoaderState_=s,Error("Undefined script input");r.pathIsModule[n]?(i=!0,goog.importModule_(goog.basePath+n)):goog.importScript_(goog.basePath+n)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(o){return o in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[o]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(o){var t=typeof o;if("object"==t){if(!o)return"null";if(o instanceof Array)return"array";if(o instanceof Object)return t;var e=Object.prototype.toString.call(o);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof o.length&&"undefined"!=typeof o.splice&&"undefined"!=typeof o.propertyIsEnumerable&&!o.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof o.call&&"undefined"!=typeof o.propertyIsEnumerable&&!o.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof o.call)return"object";return t},goog.isNull=function(o){return null===o},goog.isDefAndNotNull=function(o){return null!=o},goog.isArray=function(o){return"array"==goog.typeOf(o)},goog.isArrayLike=function(o){var t=goog.typeOf(o);return"array"==t||"object"==t&&"number"==typeof o.length},goog.isDateLike=function(o){return goog.isObject(o)&&"function"==typeof o.getFullYear},goog.isString=function(o){return"string"==typeof o},goog.isBoolean=function(o){return"boolean"==typeof o},goog.isNumber=function(o){return"number"==typeof o},goog.isFunction=function(o){return"function"==goog.typeOf(o)},goog.isObject=function(o){var t=typeof o;return"object"==t&&null!=o||"function"==t},goog.getUid=function(o){return o[goog.UID_PROPERTY_]||(o[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(o){return!!o[goog.UID_PROPERTY_]},goog.removeUid=function(o){"removeAttribute"in o&&o.removeAttribute(goog.UID_PROPERTY_);try{delete o[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(o){var t=goog.typeOf(o);if("object"==t||"array"==t){if(o.clone)return o.clone();var e="array"==t?[]:{};for(var r in o)e[r]=goog.cloneObject(o[r]);return e}return o},goog.bindNative_=function(o,t,e){return o.call.apply(o.bind,arguments)},goog.bindJs_=function(o,t,e){if(!o)throw new Error;if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),o.apply(t,e)}}return function(){return o.apply(t,arguments)}},goog.bind=function(o,t,e){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(o,t){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),o.apply(this,t)}},goog.mixin=function(o,t){for(var e in t)o[e]=t[e]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(o){if(goog.global.execScript)goog.global.execScript(o,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(o);else{var t=goog.global.document,e=t.createElement("script");e.type="text/javascript",e.defer=!1,e.appendChild(t.createTextNode(o)),t.body.appendChild(e),t.body.removeChild(e)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(o,t){var e,r=function(o){return goog.cssNameMapping_[o]||o},n=function(o){for(var t=o.split("-"),e=[],n=0;n<t.length;n++)e.push(r(t[n]));return e.join("-")};return e=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(o){return o},t?o+"-"+e(t):e(o)},goog.setCssNameMapping=function(o,t){goog.cssNameMapping_=o,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(o,t){return t&&(o=o.replace(/\{\$([^}]+)}/g,function(o,e){return e in t?t[e]:o})),o},goog.getMsgWithFallback=function(o,t){return o},goog.exportSymbol=function(o,t,e){goog.exportPath_(o,t,e)},goog.exportProperty=function(o,t,e){o[t]=e},goog.inherits=function(o,t){function e(){}e.prototype=t.prototype,o.superClass_=t.prototype,o.prototype=new e,o.prototype.constructor=o,o.base=function(o,e,r){var n=Array.prototype.slice.call(arguments,2);return t.prototype[e].apply(o,n)}},goog.base=function(o,t,e){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_)return r.superClass_.constructor.apply(o,Array.prototype.slice.call(arguments,1));for(var n=Array.prototype.slice.call(arguments,2),g=!1,s=o.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===r)g=!0;else if(g)return s.prototype[t].apply(o,n);if(o[t]===r)return o.constructor.prototype[t].apply(o,n);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(o){o.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(o,t){var e=t.constructor,r=t.statics;e&&e!=Object.prototype.constructor||(e=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var n=goog.defineClass.createSealingConstructor_(e,o);return o&&goog.inherits(n,o),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(o,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return o;var e=function(){var t=o.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===e&&Object.seal(t),t};return e}return o},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(o,t){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)e=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},goog.tagUnsealableClass=function(o){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(o.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.provide("goog.disposable.IDisposable"),goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.provide("goog.Disposable"),goog.provide("goog.dispose"),goog.provide("goog.disposeAll"),goog.require("goog.disposable.IDisposable"),goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=(new Error).stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.define("goog.Disposable.MONITORING_MODE",0),goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",!0),goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var o=[];for(var t in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(t)&&o.push(goog.Disposable.instances_[Number(t)]);return o},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.onDisposeCallbacks_,goog.Disposable.prototype.creationStack,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var o=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(o))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[o]}},goog.Disposable.prototype.registerDisposable=function(o){this.addOnDisposeCallback(goog.partial(goog.dispose,o))},goog.Disposable.prototype.addOnDisposeCallback=function(o,t){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(t)?goog.bind(o,t):o)},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(o){return o&&"function"==typeof o.isDisposed?o.isDisposed():!1},goog.dispose=function(o){o&&"function"==typeof o.dispose&&o.dispose()},goog.disposeAll=function(o){for(var t=0,e=arguments.length;e>t;++t){var r=arguments[t];goog.isArrayLike(r)?goog.disposeAll.apply(null,r):goog.dispose(r)}},goog.provide("goog.events.EventId"),goog.events.EventId=function(o){this.id=o},goog.events.EventId.prototype.toString=function(){return this.id},goog.provide("goog.events.Event"),goog.provide("goog.events.EventLike"),goog.require("goog.Disposable"),goog.require("goog.events.EventId"),goog.events.EventLike,goog.events.Event=function(o,t){this.type=o instanceof goog.events.EventId?String(o):o,this.target=t,this.currentTarget=this.target,this.propagationStopped_=!1,this.defaultPrevented=!1,this.returnValue_=!0},goog.events.Event.prototype.disposeInternal=function(){},goog.events.Event.prototype.dispose=function(){},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(o){o.stopPropagation()},goog.events.Event.preventDefault=function(o){o.preventDefault()},goog.provide("goog.debug.Error"),goog.debug.Error=function(o){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}o&&(this.message=String(o))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.provide("goog.dom.NodeType"),goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.string"),goog.provide("goog.string.Unicode"),goog.define("goog.string.DETECT_DOUBLE_ESCAPING",!1),goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(o,t){return 0==o.lastIndexOf(t,0)},goog.string.endsWith=function(o,t){var e=o.length-t.length;return e>=0&&o.indexOf(t,e)==e},goog.string.caseInsensitiveStartsWith=function(o,t){return 0==goog.string.caseInsensitiveCompare(t,o.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(o,t){return 0==goog.string.caseInsensitiveCompare(t,o.substr(o.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(o,t){return o.toLowerCase()==t.toLowerCase()},goog.string.subs=function(o,t){for(var e=o.split("%s"),r="",n=Array.prototype.slice.call(arguments,1);n.length&&e.length>1;)r+=e.shift()+n.shift();return r+e.join("%s")},goog.string.collapseWhitespace=function(o){return o.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmpty=function(o){return/^[\s\xa0]*$/.test(o)},goog.string.isEmptySafe=function(o){return goog.string.isEmpty(goog.string.makeSafe(o))},goog.string.isBreakingWhitespace=function(o){return!/[^\t\n\r ]/.test(o)},goog.string.isAlpha=function(o){return!/[^a-zA-Z]/.test(o)},goog.string.isNumeric=function(o){return!/[^0-9]/.test(o)},goog.string.isAlphaNumeric=function(o){return!/[^a-zA-Z0-9]/.test(o)},goog.string.isSpace=function(o){return" "==o},goog.string.isUnicodeChar=function(o){return 1==o.length&&o>=" "&&"~">=o||o>=""&&"�">=o},goog.string.stripNewlines=function(o){return o.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(o){return o.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(o){return o.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(o){return o.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(o){return o.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(o){return o.trim()}:function(o){return o.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(o){return o.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(o){return o.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(o,t){var e=String(o).toLowerCase(),r=String(t).toLowerCase();return r>e?-1:e==r?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(o,t){if(o==t)return 0;if(!o)return-1;if(!t)return 1;for(var e=o.toLowerCase().match(goog.string.numerateCompareRegExp_),r=t.toLowerCase().match(goog.string.numerateCompareRegExp_),n=Math.min(e.length,r.length),g=0;n>g;g++){var s=e[g],i=r[g];if(s!=i){var a=parseInt(s,10);if(!isNaN(a)){var l=parseInt(i,10);if(!isNaN(l)&&a-l)return a-l}return i>s?-1:1}}return e.length!=r.length?e.length-r.length:t>o?-1:1},goog.string.urlEncode=function(o){return encodeURIComponent(String(o))},goog.string.urlDecode=function(o){return decodeURIComponent(o.replace(/\+/g," "))},goog.string.newLineToBr=function(o,t){return o.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(o,t){return t?(o=o.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(o=o.replace(goog.string.E_RE_,"&#101;")),o):goog.string.ALL_RE_.test(o)?(-1!=o.indexOf("&")&&(o=o.replace(goog.string.AMP_RE_,"&amp;")),-1!=o.indexOf("<")&&(o=o.replace(goog.string.LT_RE_,"&lt;")),-1!=o.indexOf(">")&&(o=o.replace(goog.string.GT_RE_,"&gt;")),-1!=o.indexOf('"')&&(o=o.replace(goog.string.QUOT_RE_,"&quot;")),-1!=o.indexOf("'")&&(o=o.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=o.indexOf("\x00")&&(o=o.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=o.indexOf("e")&&(o=o.replace(goog.string.E_RE_,"&#101;")),o):o},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(o){return goog.string.contains(o,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(o):goog.string.unescapePureXmlEntities_(o):o},goog.string.unescapeEntitiesWithDocument=function(o,t){return goog.string.contains(o,"&")?goog.string.unescapeEntitiesUsingDom_(o,t):o},goog.string.unescapeEntitiesUsingDom_=function(o,t){var e,r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return e=t?t.createElement("div"):goog.global.document.createElement("div"),o.replace(goog.string.HTML_ENTITY_PATTERN_,function(o,t){var n=r[o];if(n)return n;if("#"==t.charAt(0)){var g=Number("0"+t.substr(1));isNaN(g)||(n=String.fromCharCode(g))}return n||(e.innerHTML=o+" ",n=e.firstChild.nodeValue.slice(0,-1)),r[o]=n})},goog.string.unescapePureXmlEntities_=function(o){return o.replace(/&([^;]+);/g,function(o,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var e=Number("0"+t.substr(1));if(!isNaN(e))return String.fromCharCode(e)}return o}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(o,t){return goog.string.newLineToBr(o.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(o){return o.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(o,t){for(var e=t.length,r=0;e>r;r++){var n=1==e?t:t.charAt(r);if(o.charAt(0)==n&&o.charAt(o.length-1)==n)return o.substring(1,o.length-1)}return o},goog.string.truncate=function(o,t,e){return e&&(o=goog.string.unescapeEntities(o)),o.length>t&&(o=o.substring(0,t-3)+"..."),e&&(o=goog.string.htmlEscape(o)),o},goog.string.truncateMiddle=function(o,t,e,r){if(e&&(o=goog.string.unescapeEntities(o)),r&&o.length>t){r>t&&(r=t);var n=o.length-r,g=t-r;o=o.substring(0,g)+"..."+o.substring(n)}else if(o.length>t){var s=Math.floor(t/2),i=o.length-s;s+=t%2,o=o.substring(0,s)+"..."+o.substring(i)}return e&&(o=goog.string.htmlEscape(o)),o},goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(o){if(o=String(o),o.quote)return o.quote();for(var t=['"'],e=0;e<o.length;e++){var r=o.charAt(e),n=r.charCodeAt(0);t[e+1]=goog.string.specialEscapeChars_[r]||(n>31&&127>n?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(o){for(var t=[],e=0;e<o.length;e++)t[e]=goog.string.escapeChar(o.charAt(e));return t.join("")},goog.string.escapeChar=function(o){if(o in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[o];if(o in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[o]=goog.string.specialEscapeChars_[o];var t=o,e=o.charCodeAt(0);return e>31&&127>e?t=o:(256>e?(t="\\x",(16>e||e>256)&&(t+="0")):(t="\\u",4096>e&&(t+="0")),t+=e.toString(16).toUpperCase()),goog.string.jsEscapeCache_[o]=t},goog.string.contains=function(o,t){return-1!=o.indexOf(t)},goog.string.caseInsensitiveContains=function(o,t){return goog.string.contains(o.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(o,t){return o&&t?o.split(t).length-1:0},goog.string.removeAt=function(o,t,e){var r=o;return t>=0&&t<o.length&&e>0&&(r=o.substr(0,t)+o.substr(t+e,o.length-t-e)),r},goog.string.remove=function(o,t){var e=new RegExp(goog.string.regExpEscape(t),"");return o.replace(e,"")},goog.string.removeAll=function(o,t){var e=new RegExp(goog.string.regExpEscape(t),"g");return o.replace(e,"")},goog.string.regExpEscape=function(o){return String(o).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(o,t){return new Array(t+1).join(o)},goog.string.padNumber=function(o,t,e){var r=goog.isDef(e)?o.toFixed(e):String(o),n=r.indexOf(".");return-1==n&&(n=r.length),goog.string.repeat("0",Math.max(0,t-n))+r},goog.string.makeSafe=function(o){return null==o?"":String(o)},goog.string.buildString=function(o){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){var o=2147483648;return Math.floor(Math.random()*o).toString(36)+Math.abs(Math.floor(Math.random()*o)^goog.now()).toString(36)},goog.string.compareVersions=function(o,t){for(var e=0,r=goog.string.trim(String(o)).split("."),n=goog.string.trim(String(t)).split("."),g=Math.max(r.length,n.length),s=0;0==e&&g>s;s++){var i=r[s]||"",a=n[s]||"",l=new RegExp("(\\d*)(\\D*)","g"),u=new RegExp("(\\d*)(\\D*)","g");do{var c=l.exec(i)||["","",""],P=u.exec(a)||["","",""];if(0==c[0].length&&0==P[0].length)break;var p=0==c[1].length?0:parseInt(c[1],10),h=0==P[1].length?0:parseInt(P[1],10);e=goog.string.compareElements_(p,h)||goog.string.compareElements_(0==c[2].length,0==P[2].length)||goog.string.compareElements_(c[2],P[2])}while(0==e)}return e},goog.string.compareElements_=function(o,t){return t>o?-1:o>t?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(o){for(var t=0,e=0;e<o.length;++e)t=31*t+o.charCodeAt(e),t%=goog.string.HASHCODE_MAX_;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(o){var t=Number(o);return 0==t&&goog.string.isEmpty(o)?NaN:t},goog.string.isLowerCamelCase=function(o){return/^[a-z]+([A-Z][a-z]*)*$/.test(o)},goog.string.isUpperCamelCase=function(o){return/^([A-Z][a-z]*)+$/.test(o)},goog.string.toCamelCase=function(o){return String(o).replace(/\-([a-z])/g,function(o,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(o){return String(o).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(o,t){var e=goog.isString(t)?goog.string.regExpEscape(t):"\\s";e=e?"|["+e+"]+":"";var r=new RegExp("(^"+e+")([a-z])","g");return o.replace(r,function(o,t,e){return t+e.toUpperCase()})},goog.string.parseInt=function(o){return isFinite(o)&&(o=String(o)),goog.isString(o)?/^\s*-?0x/i.test(o)?parseInt(o,16):parseInt(o,10):NaN},goog.string.splitLimit=function(o,t,e){for(var r=o.split(t),n=[];e>0&&r.length;)n.push(r.shift()),e--;return r.length&&n.push(r.join(t)),n},goog.provide("goog.asserts"),goog.provide("goog.asserts.AssertionError"),goog.require("goog.debug.Error"),goog.require("goog.dom.NodeType"),goog.require("goog.string"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(o,t){t.unshift(o),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=o},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(o){throw o},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(o,t,e,r){var n="Assertion failed";if(e){n+=": "+e;var g=r}else o&&(n+=": "+o,g=t);var s=new goog.asserts.AssertionError(""+n,g||[]);goog.asserts.errorHandler_(s)},goog.asserts.setErrorHandler=function(o){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=o)},goog.asserts.assert=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!o&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.fail=function(o,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(o)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertString=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(o)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),
o},goog.asserts.assertFunction=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(o)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertObject=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(o)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertArray=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(o)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertBoolean=function(o,t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(o)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertElement=function(o,t,e){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(o)&&o.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(o),o],t,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertInstanceof=function(o,t,e,r){return!goog.asserts.ENABLE_ASSERTS||o instanceof t||goog.asserts.doAssertFailure_("instanceof check failed.",null,e,Array.prototype.slice.call(arguments,3)),o},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var o in Object.prototype)goog.asserts.fail(o+" should not be enumerable in Object.prototype.")},goog.provide("goog.array"),goog.provide("goog.array.ArrayLike"),goog.require("goog.asserts"),goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE),goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",!1),goog.array.ArrayLike,goog.array.peek=function(o){return o[o.length-1]},goog.array.last=goog.array.peek,goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(o,t,e){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(o,t,e)}:function(o,t,e){var r=null==e?0:0>e?Math.max(0,o.length+e):e;if(goog.isString(o))return goog.isString(t)&&1==t.length?o.indexOf(t,r):-1;for(var n=r;n<o.length;n++)if(n in o&&o[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(o,t,e){goog.asserts.assert(null!=o.length);var r=null==e?o.length-1:e;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(o,t,r)}:function(o,t,e){var r=null==e?o.length-1:e;if(0>r&&(r=Math.max(0,o.length+r)),goog.isString(o))return goog.isString(t)&&1==t.length?o.lastIndexOf(t,r):-1;for(var n=r;n>=0;n--)if(n in o&&o[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(o,t,e){goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(o,t,e)}:function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=0;r>g;g++)g in n&&t.call(e,n[g],g,o)},goog.array.forEachRight=function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=r-1;g>=0;--g)g in n&&t.call(e,n[g],g,o)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(o,t,e){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.filter.call(o,t,e)}:function(o,t,e){for(var r=o.length,n=[],g=0,s=goog.isString(o)?o.split(""):o,i=0;r>i;i++)if(i in s){var a=s[i];t.call(e,a,i,o)&&(n[g++]=a)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(o,t,e){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.map.call(o,t,e)}:function(o,t,e){for(var r=o.length,n=new Array(r),g=goog.isString(o)?o.split(""):o,s=0;r>s;s++)s in g&&(n[s]=t.call(e,g[s],s,o));return n},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(o,t,e,r){return goog.asserts.assert(null!=o.length),r&&(t=goog.bind(t,r)),goog.array.ARRAY_PROTOTYPE_.reduce.call(o,t,e)}:function(o,t,e,r){var n=e;return goog.array.forEach(o,function(e,g){n=t.call(r,n,e,g,o)}),n},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(o,t,e,r){return goog.asserts.assert(null!=o.length),r&&(t=goog.bind(t,r)),goog.array.ARRAY_PROTOTYPE_.reduceRight.call(o,t,e)}:function(o,t,e,r){var n=e;return goog.array.forEachRight(o,function(e,g){n=t.call(r,n,e,g,o)}),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(o,t,e){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.some.call(o,t,e)}:function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=0;r>g;g++)if(g in n&&t.call(e,n[g],g,o))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(o,t,e){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.every.call(o,t,e)}:function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=0;r>g;g++)if(g in n&&!t.call(e,n[g],g,o))return!1;return!0},goog.array.count=function(o,t,e){var r=0;return goog.array.forEach(o,function(o,n,g){t.call(e,o,n,g)&&++r},e),r},goog.array.find=function(o,t,e){var r=goog.array.findIndex(o,t,e);return 0>r?null:goog.isString(o)?o.charAt(r):o[r]},goog.array.findIndex=function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=0;r>g;g++)if(g in n&&t.call(e,n[g],g,o))return g;return-1},goog.array.findRight=function(o,t,e){var r=goog.array.findIndexRight(o,t,e);return 0>r?null:goog.isString(o)?o.charAt(r):o[r]},goog.array.findIndexRight=function(o,t,e){for(var r=o.length,n=goog.isString(o)?o.split(""):o,g=r-1;g>=0;g--)if(g in n&&t.call(e,n[g],g,o))return g;return-1},goog.array.contains=function(o,t){return goog.array.indexOf(o,t)>=0},goog.array.isEmpty=function(o){return 0==o.length},goog.array.clear=function(o){if(!goog.isArray(o))for(var t=o.length-1;t>=0;t--)delete o[t];o.length=0},goog.array.insert=function(o,t){goog.array.contains(o,t)||o.push(t)},goog.array.insertAt=function(o,t,e){goog.array.splice(o,e,0,t)},goog.array.insertArrayAt=function(o,t,e){goog.partial(goog.array.splice,o,e,0).apply(null,t)},goog.array.insertBefore=function(o,t,e){var r;2==arguments.length||(r=goog.array.indexOf(o,e))<0?o.push(t):goog.array.insertAt(o,t,r)},goog.array.remove=function(o,t){var e,r=goog.array.indexOf(o,t);return(e=r>=0)&&goog.array.removeAt(o,r),e},goog.array.removeAt=function(o,t){return goog.asserts.assert(null!=o.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(o,t,1).length},goog.array.removeIf=function(o,t,e){var r=goog.array.findIndex(o,t,e);return r>=0?(goog.array.removeAt(o,r),!0):!1},goog.array.removeAllIf=function(o,t,e){var r=0;return goog.array.forEachRight(o,function(n,g){t.call(e,n,g,o)&&goog.array.removeAt(o,g)&&r++}),r},goog.array.concat=function(o){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.join=function(o){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(o){var t=o.length;if(t>0){for(var e=new Array(t),r=0;t>r;r++)e[r]=o[r];return e}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(o,t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];if(goog.isArray(n)||(r=goog.isArrayLike(n))&&Object.prototype.hasOwnProperty.call(n,"callee"))o.push.apply(o,n);else if(r)for(var g=o.length,s=n.length,i=0;s>i;i++)o[g+i]=n[i];else o.push(n)}},goog.array.splice=function(o,t,e,r){return goog.asserts.assert(null!=o.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(o,goog.array.slice(arguments,1))},goog.array.slice=function(o,t,e){return goog.asserts.assert(null!=o.length),arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(o,t):goog.array.ARRAY_PROTOTYPE_.slice.call(o,t,e)},goog.array.removeDuplicates=function(o,t,e){for(var r=t||o,n=function(o){return goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l},g=e||n,s={},i=0,a=0;a<o.length;){var l=o[a++],u=g(l);Object.prototype.hasOwnProperty.call(s,u)||(s[u]=!0,r[i++]=l)}r.length=i},goog.array.binarySearch=function(o,t,e){return goog.array.binarySearch_(o,e||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(o,t,e){return goog.array.binarySearch_(o,t,!0,void 0,e)},goog.array.binarySearch_=function(o,t,e,r,n){for(var g,s=0,i=o.length;i>s;){var a,l=s+i>>1;a=e?t.call(n,o[l],l,o):t(r,o[l]),a>0?s=l+1:(i=l,g=!a)}return g?s:~s},goog.array.sort=function(o,t){o.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(o,t){function e(o,t){return n(o.value,t.value)||o.index-t.index}for(var r=0;r<o.length;r++)o[r]={index:r,value:o[r]};var n=t||goog.array.defaultCompare;goog.array.sort(o,e);for(var r=0;r<o.length;r++)o[r]=o[r].value},goog.array.sortByKey=function(o,t,e){var r=e||goog.array.defaultCompare;goog.array.sort(o,function(o,e){return r(t(o),t(e))})},goog.array.sortObjectsByKey=function(o,t,e){goog.array.sortByKey(o,function(o){return o[t]},e)},goog.array.isSorted=function(o,t,e){for(var r=t||goog.array.defaultCompare,n=1;n<o.length;n++){var g=r(o[n-1],o[n]);if(g>0||0==g&&e)return!1}return!0},goog.array.equals=function(o,t,e){if(!goog.isArrayLike(o)||!goog.isArrayLike(t)||o.length!=t.length)return!1;for(var r=o.length,n=e||goog.array.defaultCompareEquality,g=0;r>g;g++)if(!n(o[g],t[g]))return!1;return!0},goog.array.compare3=function(o,t,e){for(var r=e||goog.array.defaultCompare,n=Math.min(o.length,t.length),g=0;n>g;g++){var s=r(o[g],t[g]);if(0!=s)return s}return goog.array.defaultCompare(o.length,t.length)},goog.array.defaultCompare=function(o,t){return o>t?1:t>o?-1:0},goog.array.defaultCompareEquality=function(o,t){return o===t},goog.array.binaryInsert=function(o,t,e){var r=goog.array.binarySearch(o,t,e);return 0>r?(goog.array.insertAt(o,t,-(r+1)),!0):!1},goog.array.binaryRemove=function(o,t,e){var r=goog.array.binarySearch(o,t,e);return r>=0?goog.array.removeAt(o,r):!1},goog.array.bucket=function(o,t,e){for(var r={},n=0;n<o.length;n++){var g=o[n],s=t.call(e,g,n,o);if(goog.isDef(s)){var i=r[s]||(r[s]=[]);i.push(g)}}return r},goog.array.toObject=function(o,t,e){var r={};return goog.array.forEach(o,function(n,g){r[t.call(e,n,g,o)]=n}),r},goog.array.range=function(o,t,e){var r=[],n=0,g=o,s=e||1;if(void 0!==t&&(n=o,g=t),0>s*(g-n))return[];if(s>0)for(var i=n;g>i;i+=s)r.push(i);else for(var i=n;i>g;i+=s)r.push(i);return r},goog.array.repeat=function(o,t){for(var e=[],r=0;t>r;r++)e[r]=o;return e},goog.array.flatten=function(o){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];goog.isArray(r)?t.push.apply(t,goog.array.flatten.apply(null,r)):t.push(r)}return t},goog.array.rotate=function(o,t){return goog.asserts.assert(null!=o.length),o.length&&(t%=o.length,t>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(o,o.splice(-t,t)):0>t&&goog.array.ARRAY_PROTOTYPE_.push.apply(o,o.splice(0,-t))),o},goog.array.moveItem=function(o,t,e){goog.asserts.assert(t>=0&&t<o.length),goog.asserts.assert(e>=0&&e<o.length);var r=goog.array.ARRAY_PROTOTYPE_.splice.call(o,t,1);goog.array.ARRAY_PROTOTYPE_.splice.call(o,e,0,r[0])},goog.array.zip=function(o){if(!arguments.length)return[];for(var t=[],e=0;!0;e++){for(var r=[],n=0;n<arguments.length;n++){var g=arguments[n];if(e>=g.length)return t;r.push(g[e])}t.push(r)}},goog.array.shuffle=function(o,t){for(var e=t||Math.random,r=o.length-1;r>0;r--){var n=Math.floor(e()*(r+1)),g=o[r];o[r]=o[n],o[n]=g}},goog.provide("goog.object"),goog.require("goog.array"),goog.object.forEach=function(o,t,e){for(var r in o)t.call(e,o[r],r,o)},goog.object.filter=function(o,t,e){var r={};for(var n in o)t.call(e,o[n],n,o)&&(r[n]=o[n]);return r},goog.object.map=function(o,t,e){var r={};for(var n in o)r[n]=t.call(e,o[n],n,o);return r},goog.object.some=function(o,t,e){for(var r in o)if(t.call(e,o[r],r,o))return!0;return!1},goog.object.every=function(o,t,e){for(var r in o)if(!t.call(e,o[r],r,o))return!1;return!0},goog.object.getCount=function(o){var t=0;for(var e in o)t++;return t},goog.object.getAnyKey=function(o){for(var t in o)return t},goog.object.getAnyValue=function(o){for(var t in o)return o[t]},goog.object.contains=function(o,t){return goog.object.containsValue(o,t)},goog.object.getValues=function(o){var t=[],e=0;for(var r in o)t[e++]=o[r];return t},goog.object.getKeys=function(o){var t=[],e=0;for(var r in o)t[e++]=r;return t},goog.object.getValueByKeys=function(o,t){for(var e=goog.isArrayLike(t),r=e?t:arguments,n=e?0:1;n<r.length&&(o=o[r[n]],goog.isDef(o));n++);return o},goog.object.containsKey=function(o,t){return t in o},goog.object.containsValue=function(o,t){for(var e in o)if(o[e]==t)return!0;return!1},goog.object.findKey=function(o,t,e){for(var r in o)if(t.call(e,o[r],r,o))return r},goog.object.findValue=function(o,t,e){var r=goog.object.findKey(o,t,e);return r&&o[r]},goog.object.isEmpty=function(o){for(var t in o)return!1;return!0},goog.object.clear=function(o){for(var t in o)delete o[t]},goog.object.remove=function(o,t){var e;return(e=t in o)&&delete o[t],e},goog.object.add=function(o,t,e){if(t in o)throw Error('The object already contains the key "'+t+'"');goog.object.set(o,t,e)},goog.object.get=function(o,t,e){return t in o?o[t]:e},goog.object.set=function(o,t,e){o[t]=e},goog.object.setIfUndefined=function(o,t,e){return t in o?o[t]:o[t]=e},goog.object.equals=function(o,t){if(!goog.array.equals(goog.object.getKeys(o),goog.object.getKeys(t)))return!1;for(var e in o)if(o[e]!==t[e])return!1;return!0},goog.object.clone=function(o){var t={};for(var e in o)t[e]=o[e];return t},goog.object.unsafeClone=function(o){var t=goog.typeOf(o);if("object"==t||"array"==t){if(o.clone)return o.clone();var e="array"==t?[]:{};for(var r in o)e[r]=goog.object.unsafeClone(o[r]);return e}return o},goog.object.transpose=function(o){var t={};for(var e in o)t[o[e]]=e;return t},goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.object.extend=function(o,t){for(var e,r,n=1;n<arguments.length;n++){r=arguments[n];for(e in r)o[e]=r[e];for(var g=0;g<goog.object.PROTOTYPE_FIELDS_.length;g++)e=goog.object.PROTOTYPE_FIELDS_[g],Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e])}},goog.object.create=function(o){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var e={},r=0;t>r;r+=2)e[arguments[r]]=arguments[r+1];return e},goog.object.createSet=function(o){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var e={},r=0;t>r;r++)e[arguments[r]]=!0;return e},goog.object.createImmutableView=function(o){var t=o;return Object.isFrozen&&!Object.isFrozen(o)&&(t=Object.create(o),Object.freeze(t)),t},goog.object.isImmutableView=function(o){return!!Object.isFrozen&&Object.isFrozen(o)},goog.provide("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.util.getNativeUserAgentString_=function(){var o=goog.labs.userAgent.util.getNavigator_();if(o){var t=o.userAgent;if(t)return t}return""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(o){goog.labs.userAgent.util.userAgent_=o||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(o){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,o)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(o){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,o)},goog.labs.userAgent.util.extractVersionTuples=function(o){for(var t,e=new RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),r=[];t=e.exec(o);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.provide("goog.labs.userAgent.browser"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.object"),goog.require("goog.string"),goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!goog.labs.userAgent.util.matchUserAgent("Chrome")&&!goog.labs.userAgent.util.matchUserAgent("CriOS")&&!goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.matchChrome_=function(){return goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS")},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return!goog.labs.userAgent.browser.isChrome()&&goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function o(o){var t=goog.array.find(o,n);return r[t]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var e=goog.labs.userAgent.util.extractVersionTuples(t),r={};goog.array.forEach(e,function(o){var t=o[0],e=o[1];r[t]=e});var n=goog.partial(goog.object.containsKey,r);if(goog.labs.userAgent.browser.isOpera())return o(["Version","Opera","OPR"]);if(goog.labs.userAgent.browser.isChrome())return o(["Chrome","CriOS"]);var g=e[2];return g&&g[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(o){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),o)>=0},goog.labs.userAgent.browser.getIEVersion_=function(o){var t=/rv: *([\d\.]*)/.exec(o);if(t&&t[1])return t[1];var e="",r=/MSIE +([\d\.]+)/.exec(o);if(r&&r[1]){var n=/Trident\/(\d.\d)/.exec(o);if("7.0"==r[1])if(n&&n[1])switch(n[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=r[1]}return e},goog.provide("goog.labs.userAgent.engine"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()},goog.labs.userAgent.engine.getVersion=function(){var o=goog.labs.userAgent.util.getUserAgent();if(o){var t=goog.labs.userAgent.util.extractVersionTuples(o),e=t[1];if(e)return"Gecko"==e[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):e[1];var r,n=t[0];if(n&&(r=n[2])){var g=/Trident\/([^\s;]+)/.exec(r);if(g)return g[1]}}return""},goog.labs.userAgent.engine.isVersionOrHigher=function(o){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),o)>=0},goog.labs.userAgent.engine.getVersionForKey_=function(o,t){var e=goog.array.find(o,function(o){return t==o[0]});return e&&e[1]||""},goog.provide("goog.reflect"),goog.reflect.object=function(o,t){return t},goog.reflect.sinkValue=function(o){return goog.reflect.sinkValue[" "](o),o},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(o,t){try{return goog.reflect.sinkValue(o[t]),!0}catch(e){}return!1},goog.provide("goog.userAgent"),goog.require("goog.labs.userAgent.browser"),goog.require("goog.labs.userAgent.engine"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.define("goog.userAgent.ASSUME_IE",!1),goog.define("goog.userAgent.ASSUME_GECKO",!1),goog.define("goog.userAgent.ASSUME_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_OPERA",!1),goog.define("goog.userAgent.ASSUME_ANY_VERSION",!1),goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var o=goog.userAgent.getNavigator();return o&&o.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.define("goog.userAgent.ASSUME_MAC",!1),goog.define("goog.userAgent.ASSUME_WINDOWS",!1),goog.define("goog.userAgent.ASSUME_LINUX",!1),goog.define("goog.userAgent.ASSUME_X11",!1),goog.define("goog.userAgent.ASSUME_ANDROID",!1),goog.define("goog.userAgent.ASSUME_IPHONE",!1),goog.define("goog.userAgent.ASSUME_IPAD",!1),goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac"),goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win"),goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux"),goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var o=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!o&&goog.string.contains(o,"Android"),goog.userAgent.detectedIPhone_=!!o&&goog.string.contains(o,"iPhone"),goog.userAgent.detectedIPad_=!!o&&goog.string.contains(o,"iPad")},goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_(),goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_,goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_,goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_,goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_,goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_,goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_,goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_,goog.userAgent.determineVersion_=function(){var o,t="";if(goog.userAgent.OPERA&&goog.global.opera){var e=goog.global.opera.version;return goog.isFunction(e)?e():e}if(goog.userAgent.GECKO?o=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?o=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(o=/WebKit\/(\S+)/),o){var r=o.exec(goog.userAgent.getUserAgentString());t=r?r[1]:""}if(goog.userAgent.IE){var n=goog.userAgent.getDocumentMode_();if(n>parseFloat(t))return String(n)}return t},goog.userAgent.getDocumentMode_=function(){var o=goog.global.document;return o?o.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(o,t){return goog.string.compareVersions(o,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(o){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[o]||(goog.userAgent.isVersionOrHigherCache_[o]=goog.string.compareVersions(goog.userAgent.VERSION,o)>=0)},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(o){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=o},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var o=goog.global.document;if(o&&goog.userAgent.IE){var t=goog.userAgent.getDocumentMode_();return t||("CSS1Compat"==o.compatMode?parseInt(goog.userAgent.VERSION,10):5)}}(),goog.provide("goog.events.EventType"),goog.require("goog.userAgent"),goog.events.getVendorPrefixedName_=function(o){return goog.userAgent.WEBKIT?"webkit"+o:goog.userAgent.OPERA?"o"+o.toLowerCase():o.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEWHEEL:goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified"},goog.provide("goog.events.BrowserFeature"),goog.require("goog.userAgent"),goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)},goog.provide("goog.events.BrowserEvent"),goog.provide("goog.events.BrowserEvent.MouseButton"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Event"),goog.require("goog.events.EventType"),goog.require("goog.reflect"),goog.require("goog.userAgent"),goog.events.BrowserEvent=function(o,t){goog.events.BrowserEvent.base(this,"constructor",o?o.type:""),this.target=null,this.currentTarget=null,this.relatedTarget=null,this.offsetX=0,this.offsetY=0,this.clientX=0,this.clientY=0,this.screenX=0,this.screenY=0,this.button=0,this.keyCode=0,this.charCode=0,this.ctrlKey=!1,this.altKey=!1,this.shiftKey=!1,this.metaKey=!1,this.state=null,this.platformModifierKey=!1,this.event_=null,o&&this.init(o,t)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.IEButtonMap=[1,4,2],goog.events.BrowserEvent.prototype.init=function(o,t){var e=this.type=o.type;this.target=o.target||o.srcElement,this.currentTarget=t;var r=o.relatedTarget;r?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(r,"nodeName")||(r=null)):e==goog.events.EventType.MOUSEOVER?r=o.fromElement:e==goog.events.EventType.MOUSEOUT&&(r=o.toElement),this.relatedTarget=r,this.offsetX=goog.userAgent.WEBKIT||void 0!==o.offsetX?o.offsetX:o.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==o.offsetY?o.offsetY:o.layerY,this.clientX=void 0!==o.clientX?o.clientX:o.pageX,
this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0,this.button=o.button,this.keyCode=o.keyCode||0,this.charCode=o.charCode||("keypress"==e?o.keyCode:0),this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.platformModifierKey=goog.userAgent.MAC?o.metaKey:o.ctrlKey,this.state=o.state,this.event_=o,o.defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(o){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==o:"click"==this.type?o==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[o])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var o=this.event_;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var t=112,e=123;(o.ctrlKey||o.keyCode>=t&&o.keyCode<=e)&&(o.keyCode=-1)}catch(r){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.prototype.disposeInternal=function(){},goog.provide("goog.debug.EntryPointMonitor"),goog.provide("goog.debug.entryPointRegistry"),goog.require("goog.asserts"),goog.debug.EntryPointMonitor=function(){},goog.debug.EntryPointMonitor.prototype.wrap,goog.debug.EntryPointMonitor.prototype.unwrap,goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(o){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=o,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,e=0;e<t.length;e++)o(goog.bind(t[e].wrap,t[e]))},goog.debug.entryPointRegistry.monitorAll=function(o){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(o.wrap,o),e=0;e<goog.debug.entryPointRegistry.refList_.length;e++)goog.debug.entryPointRegistry.refList_[e](t);goog.debug.entryPointRegistry.monitors_.push(o)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(o){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(o==t[t.length-1],"Only the most recent monitor can be unwrapped.");for(var e=goog.bind(o.unwrap,o),r=0;r<goog.debug.entryPointRegistry.refList_.length;r++)goog.debug.entryPointRegistry.refList_[r](e);t.length--},goog.provide("goog.events.Listenable"),goog.provide("goog.events.ListenableKey"),goog.require("goog.events.EventId"),goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(o){o.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(o){return!(!o||!o[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.Listenable.prototype.listen,goog.events.Listenable.prototype.listenOnce,goog.events.Listenable.prototype.unlisten,goog.events.Listenable.prototype.unlistenByKey,goog.events.Listenable.prototype.dispatchEvent,goog.events.Listenable.prototype.removeAllListeners,goog.events.Listenable.prototype.getParentEventTarget,goog.events.Listenable.prototype.fireListeners,goog.events.Listenable.prototype.getListeners,goog.events.Listenable.prototype.getListener,goog.events.Listenable.prototype.hasListener,goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.ListenableKey.prototype.src,goog.events.ListenableKey.prototype.type,goog.events.ListenableKey.prototype.listener,goog.events.ListenableKey.prototype.capture,goog.events.ListenableKey.prototype.handler,goog.events.ListenableKey.prototype.key,goog.provide("goog.events.Listener"),goog.require("goog.events.ListenableKey"),goog.events.Listener=function(o,t,e,r,n,g){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=(new Error).stack),this.listener=o,this.proxy=t,this.src=e,this.type=r,this.capture=!!n,this.handler=g,this.key=goog.events.ListenableKey.reserveKey(),this.callOnce=!1,this.removed=!1},goog.define("goog.events.Listener.ENABLE_MONITORING",!1),goog.events.Listener.prototype.creationStack,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null},goog.provide("goog.events.ListenerMap"),goog.require("goog.array"),goog.require("goog.events.Listener"),goog.require("goog.object"),goog.events.ListenerMap=function(o){this.src=o,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var o=0;for(var t in this.listeners)o+=this.listeners[t].length;return o},goog.events.ListenerMap.prototype.add=function(o,t,e,r,n){var g=o.toString(),s=this.listeners[g];s||(s=this.listeners[g]=[],this.typeCount_++);var i,a=goog.events.ListenerMap.findListenerIndex_(s,t,r,n);return a>-1?(i=s[a],e||(i.callOnce=!1)):(i=new goog.events.Listener(t,null,this.src,g,!!r,n),i.callOnce=e,s.push(i)),i},goog.events.ListenerMap.prototype.remove=function(o,t,e,r){var n=o.toString();if(!(n in this.listeners))return!1;var g=this.listeners[n],s=goog.events.ListenerMap.findListenerIndex_(g,t,e,r);if(s>-1){var i=g[s];return i.markAsRemoved(),goog.array.removeAt(g,s),0==g.length&&(delete this.listeners[n],this.typeCount_--),!0}return!1},goog.events.ListenerMap.prototype.removeByKey=function(o){var t=o.type;if(!(t in this.listeners))return!1;var e=goog.array.remove(this.listeners[t],o);return e&&(o.markAsRemoved(),0==this.listeners[t].length&&(delete this.listeners[t],this.typeCount_--)),e},goog.events.ListenerMap.prototype.removeAll=function(o){var t=o&&o.toString(),e=0;for(var r in this.listeners)if(!t||r==t){for(var n=this.listeners[r],g=0;g<n.length;g++)++e,n[g].markAsRemoved();delete this.listeners[r],this.typeCount_--}return e},goog.events.ListenerMap.prototype.getListeners=function(o,t){var e=this.listeners[o.toString()],r=[];if(e)for(var n=0;n<e.length;++n){var g=e[n];g.capture==t&&r.push(g)}return r},goog.events.ListenerMap.prototype.getListener=function(o,t,e,r){var n=this.listeners[o.toString()],g=-1;return n&&(g=goog.events.ListenerMap.findListenerIndex_(n,t,e,r)),g>-1?n[g]:null},goog.events.ListenerMap.prototype.hasListener=function(o,t){var e=goog.isDef(o),r=e?o.toString():"",n=goog.isDef(t);return goog.object.some(this.listeners,function(o,g){for(var s=0;s<o.length;++s)if(!(e&&o[s].type!=r||n&&o[s].capture!=t))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(o,t,e,r){for(var n=0;n<o.length;++n){var g=o[n];if(!g.removed&&g.listener==t&&g.capture==!!e&&g.handler==r)return n}return-1},goog.provide("goog.events"),goog.provide("goog.events.CaptureSimulationMode"),goog.provide("goog.events.Key"),goog.provide("goog.events.ListenableType"),goog.require("goog.asserts"),goog.require("goog.debug.entryPointRegistry"),goog.require("goog.events.BrowserEvent"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Listenable"),goog.require("goog.events.ListenerMap"),goog.forwardDeclare("goog.debug.ErrorHandler"),goog.forwardDeclare("goog.events.EventWrapper"),goog.events.Key,goog.events.ListenableType,goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.define("goog.events.CAPTURE_SIMULATION_MODE",2),goog.events.listenerCountEstimate_=0,goog.events.listen=function(o,t,e,r,n){if(goog.isArray(t)){for(var g=0;g<t.length;g++)goog.events.listen(o,t[g],e,r,n);return null}return e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(o)?o.listen(t,e,r,n):goog.events.listen_(o,t,e,!1,r,n)},goog.events.listen_=function(o,t,e,r,n,g){if(!t)throw Error("Invalid event type");var s=!!n;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var i=goog.events.getListenerMap_(o);i||(o[goog.events.LISTENER_MAP_PROP_]=i=new goog.events.ListenerMap(o));var a=i.add(t,e,r,n,g);if(a.proxy)return a;var l=goog.events.getProxy();return a.proxy=l,l.src=o,l.listener=a,o.addEventListener?o.addEventListener(t.toString(),l,s):o.attachEvent(goog.events.getOnString_(t.toString()),l),goog.events.listenerCountEstimate_++,a},goog.events.getProxy=function(){var o=goog.events.handleBrowserEvent_,t=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(e){return o.call(t.src,t.listener,e)}:function(e){var r=o.call(t.src,t.listener,e);return r?void 0:r};return t},goog.events.listenOnce=function(o,t,e,r,n){if(goog.isArray(t)){for(var g=0;g<t.length;g++)goog.events.listenOnce(o,t[g],e,r,n);return null}return e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(o)?o.listenOnce(t,e,r,n):goog.events.listen_(o,t,e,!0,r,n)},goog.events.listenWithWrapper=function(o,t,e,r,n){t.listen(o,e,r,n)},goog.events.unlisten=function(o,t,e,r,n){if(goog.isArray(t)){for(var g=0;g<t.length;g++)goog.events.unlisten(o,t[g],e,r,n);return null}if(e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(o))return o.unlisten(t,e,r,n);if(!o)return!1;var s=!!r,i=goog.events.getListenerMap_(o);if(i){var a=i.getListener(t,e,s,n);if(a)return goog.events.unlistenByKey(a)}return!1},goog.events.unlistenByKey=function(o){if(goog.isNumber(o))return!1;var t=o;if(!t||t.removed)return!1;var e=t.src;if(goog.events.Listenable.isImplementedBy(e))return e.unlistenByKey(t);var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent&&e.detachEvent(goog.events.getOnString_(r),n),goog.events.listenerCountEstimate_--;var g=goog.events.getListenerMap_(e);return g?(g.removeByKey(t),0==g.getTypeCount()&&(g.src=null,e[goog.events.LISTENER_MAP_PROP_]=null)):t.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(o,t,e,r,n){t.unlisten(o,e,r,n)},goog.events.removeAll=function(o,t){if(!o)return 0;if(goog.events.Listenable.isImplementedBy(o))return o.removeAllListeners(t);var e=goog.events.getListenerMap_(o);if(!e)return 0;var r=0,n=t&&t.toString();for(var g in e.listeners)if(!n||g==n)for(var s=e.listeners[g].concat(),i=0;i<s.length;++i)goog.events.unlistenByKey(s[i])&&++r;return r},goog.events.removeAllNativeListeners=function(){return goog.events.listenerCountEstimate_=0,0},goog.events.getListeners=function(o,t,e){if(goog.events.Listenable.isImplementedBy(o))return o.getListeners(t,e);if(!o)return[];var r=goog.events.getListenerMap_(o);return r?r.getListeners(t,e):[]},goog.events.getListener=function(o,t,e,r,n){t=t,e=goog.events.wrapListener(e);var g=!!r;if(goog.events.Listenable.isImplementedBy(o))return o.getListener(t,e,g,n);if(!o)return null;var s=goog.events.getListenerMap_(o);return s?s.getListener(t,e,g,n):null},goog.events.hasListener=function(o,t,e){if(goog.events.Listenable.isImplementedBy(o))return o.hasListener(t,e);var r=goog.events.getListenerMap_(o);return!!r&&r.hasListener(t,e)},goog.events.expose=function(o){var t=[];for(var e in o)o[e]&&o[e].id?t.push(e+" = "+o[e]+" ("+o[e].id+")"):t.push(e+" = "+o[e]);return t.join("\n")},goog.events.getOnString_=function(o){return o in goog.events.onStringMap_?goog.events.onStringMap_[o]:goog.events.onStringMap_[o]=goog.events.onString_+o},goog.events.fireListeners=function(o,t,e,r){return goog.events.Listenable.isImplementedBy(o)?o.fireListeners(t,e,r):goog.events.fireListeners_(o,t,e,r)},goog.events.fireListeners_=function(o,t,e,r){var n=1,g=goog.events.getListenerMap_(o);if(g){var s=g.listeners[t.toString()];if(s){s=s.concat();for(var i=0;i<s.length;i++){var a=s[i];a&&a.capture==e&&!a.removed&&(n&=goog.events.fireListener(a,r)!==!1)}}}return Boolean(n)},goog.events.fireListener=function(o,t){var e=o.listener,r=o.handler||o.src;return o.callOnce&&goog.events.unlistenByKey(o),e.call(r,t)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(o,t){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(o),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),o.dispatchEvent(t)},goog.events.protectBrowserEventEntryPoint=function(o){goog.events.handleBrowserEvent_=o.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(o,t){if(o.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var e=t||goog.getObjectByName("window.event"),r=new goog.events.BrowserEvent(e,this),n=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(e)){goog.events.markIeEvent_(e);for(var g=[],s=r.currentTarget;s;s=s.parentNode)g.push(s);for(var i=o.type,a=g.length-1;!r.propagationStopped_&&a>=0;a--)r.currentTarget=g[a],n&=goog.events.fireListeners_(g[a],i,!0,r);for(var a=0;!r.propagationStopped_&&a<g.length;a++)r.currentTarget=g[a],n&=goog.events.fireListeners_(g[a],i,!1,r)}}else n=goog.events.fireListener(o,r);return n}return goog.events.fireListener(o,new goog.events.BrowserEvent(t,this))},goog.events.markIeEvent_=function(o){var t=!1;if(0==o.keyCode)try{return void(o.keyCode=-1)}catch(e){t=!0}(t||void 0==o.returnValue)&&(o.returnValue=!0)},goog.events.isMarkedIeEvent_=function(o){return o.keyCode<0||void 0!=o.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(o){return o+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(o){var t=o[goog.events.LISTENER_MAP_PROP_];return t instanceof goog.events.ListenerMap?t:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(o){return goog.asserts.assert(o,"Listener can not be null."),goog.isFunction(o)?o:(goog.asserts.assert(o.handleEvent,"An object listener must have handleEvent method."),o[goog.events.LISTENER_WRAPPER_PROP_]||(o[goog.events.LISTENER_WRAPPER_PROP_]=function(t){return o.handleEvent(t)}),o[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(o){goog.events.handleBrowserEvent_=o(goog.events.handleBrowserEvent_)});var P={version:"1.0.0"};"object"==typeof module&&"object"==typeof module.exports?module.exports=P:"function"==typeof define&&define.amd&&define(P),"undefined"!=typeof window&&expose(),P.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},P.Utils={_stampId:0},P.Utils.trim=function(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")},P.Utils.stamp=function(o){var t="_p_id_";return o[t]=o[t]||this._stampId++,o[t]},P.DomUtils={},P.DomUtils.create=function(o,t,e,r){var n=document.createElement(o);return n.className=t||"",r&&(n.id=r),e&&e.appendChild(n),n},P.DomUtils.createHidden=function(o,t,e){var r=document.createElement(o);return r.style.display="none",e&&(r.id=e),t&&t.appendChild(r),r},P.DomUtils.remove=function(o,t){t&&o&&t.removeChild(o)},P.DomUtils.get=function(o){return document.getElementById(o)},P.DomUtils.getStyle=function(o,t){var e=o.style[t];return"auto"===e?null:e},P.DomUtils.hasClass=function(o,t){return o.className.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(o.className)},P.DomUtils.addClass=function(o,t){this.hasClass(o,t)||(o.className&&(o.className+=" "),o.className+=t)},P.DomUtils.removeClass=function(o,t){o.className=P.Utils.trim((" "+o.className+" ").replace(" "+t+" "," "))},P.DomUtils.getDomEventKey=function(o,t,e){return"_p_dom_event_"+o+"_"+P.Utils.stamp(t)+(e?"_"+P.Utils.stamp(e):"")},P.DomUtils.addListener=function(o,t,e,r){var n=this,g=P.DomUtils.getDomEventKey(t,e,r),s=o[g];return s?n:(s=function(t){return e.call(r||o,t)},"addEventListener"in o?o.addEventListener(t,s,!1):"attachEvent"in o&&o.attachEvent("on"+t,s),o[g]=s,n)},P.DomUtils.removeListener=function(o,t,e,r){var n=this,g=P.DomUtils.getDomEventKey(t,e,r),s=o[g];return s?("removeEventListener"in o?o.removeEventListener(t,s,!1):"detachEvent"in o&&o.detachEvent("on"+t,s),o[g]=null,n):n},P.PlotTypes={ARC:"arc",ELLIPSE:"ellipse",CURVE:"curve",CLOSED_CURVE:"closedcurve",LUNE:"lune",SECTOR:"sector",GATHERING_PLACE:"gatheringplace",STRAIGHT_ARROW:"straightarrow",ASSAULT_DIRECTION:"assaultdirection",ATTACK_ARROW:"attackarrow",TAILED_ATTACK_ARROW:"tailedattackarrow",SQUAD_COMBAT:"squadcombat",TAILED_SQUAD_COMBAT:"tailedsquadcombat",FINE_ARROW:"finearrow",CIRCLE:"circle",DOUBLE_ARROW:"doublearrow",POLYLINE:"polyline",FREEHAND_LINE:"freehandline",POLYGON:"polygon",FREEHAND_POLYGON:"freehandpolygon",RECTANGLE:"rectangle",POINT:"point",TRIANGLE:"triangle"},P.PlotUtils={},P.PlotUtils.distance=function(o,t){return Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2))},P.PlotUtils.wholeDistance=function(o){for(var t=0,e=0;e<o.length-1;e++)t+=P.PlotUtils.distance(o[e],o[e+1]);return t},P.PlotUtils.getBaseLength=function(o){return Math.pow(P.PlotUtils.wholeDistance(o),.99)},P.PlotUtils.mid=function(o,t){return[(o[0]+t[0])/2,(o[1]+t[1])/2]},P.PlotUtils.getCircleCenterOfThreePoints=function(o,t,e){var r=[(o[0]+t[0])/2,(o[1]+t[1])/2],n=[r[0]-o[1]+t[1],r[1]+o[0]-t[0]],g=[(o[0]+e[0])/2,(o[1]+e[1])/2],s=[g[0]-o[1]+e[1],g[1]+o[0]-e[0]];return P.PlotUtils.getIntersectPoint(r,n,g,s)},P.PlotUtils.getIntersectPoint=function(o,t,e,r){if(o[1]==t[1]){var n=(r[0]-e[0])/(r[1]-e[1]),g=n*(o[1]-e[1])+e[0],s=o[1];return[g,s]}if(e[1]==r[1]){var i=(t[0]-o[0])/(t[1]-o[1]);return g=i*(e[1]-o[1])+o[0],s=e[1],[g,s]}return i=(t[0]-o[0])/(t[1]-o[1]),n=(r[0]-e[0])/(r[1]-e[1]),s=(i*o[1]-o[0]-n*e[1]+e[0])/(i-n),g=i*s-i*o[1]+o[0],[g,s]},P.PlotUtils.getAzimuth=function(o,t){var e,r=Math.asin(Math.abs(t[1]-o[1])/P.PlotUtils.distance(o,t));return t[1]>=o[1]&&t[0]>=o[0]?e=r+Math.PI:t[1]>=o[1]&&t[0]<o[0]?e=P.Constants.TWO_PI-r:t[1]<o[1]&&t[0]<o[0]?e=r:t[1]<o[1]&&t[0]>=o[0]&&(e=Math.PI-r),e},P.PlotUtils.getAngleOfThreePoints=function(o,t,e){var r=P.PlotUtils.getAzimuth(t,o)-P.PlotUtils.getAzimuth(t,e);return 0>r?r+P.Constants.TWO_PI:r},P.PlotUtils.isClockWise=function(o,t,e){return(e[1]-o[1])*(t[0]-o[0])>(t[1]-o[1])*(e[0]-o[0])},P.PlotUtils.getPointOnLine=function(o,t,e){var r=t[0]+o*(e[0]-t[0]),n=t[1]+o*(e[1]-t[1]);return[r,n]},P.PlotUtils.getCubicValue=function(o,t,e,r,n){o=Math.max(Math.min(o,1),0);var g=1-o,s=o*o,i=s*o,a=g*g,l=a*g,u=l*t[0]+3*a*o*e[0]+3*g*s*r[0]+i*n[0],c=l*t[1]+3*a*o*e[1]+3*g*s*r[1]+i*n[1];return[u,c]},P.PlotUtils.getThirdPoint=function(o,t,e,r,n){var g=P.PlotUtils.getAzimuth(o,t),s=n?g+e:g-e,i=r*Math.cos(s),a=r*Math.sin(s);return[t[0]+i,t[1]+a]},P.PlotUtils.getArcPoints=function(o,t,e,r){var n,g,s=[],i=r-e;i=0>i?i+P.Constants.TWO_PI:i;for(var a=0;a<=P.Constants.FITTING_COUNT;a++){var l=e+i*a/P.Constants.FITTING_COUNT;n=o[0]+t*Math.cos(l),g=o[1]+t*Math.sin(l),s.push([n,g])}return s},P.PlotUtils.getBisectorNormals=function(o,t,e,r){var n=P.PlotUtils.getNormal(t,e,r),g=Math.sqrt(n[0]*n[0]+n[1]*n[1]),s=n[0]/g,i=n[1]/g,a=P.PlotUtils.distance(t,e),l=P.PlotUtils.distance(e,r);if(g>P.Constants.ZERO_TOLERANCE)if(P.PlotUtils.isClockWise(t,e,r)){var u=o*a,c=e[0]-u*i,p=e[1]+u*s,h=[c,p];u=o*l,c=e[0]+u*i,p=e[1]-u*s;var d=[c,p]}else u=o*a,c=e[0]+u*i,p=e[1]-u*s,h=[c,p],u=o*l,c=e[0]-u*i,p=e[1]+u*s,d=[c,p];else c=e[0]+o*(t[0]-e[0]),p=e[1]+o*(t[1]-e[1]),h=[c,p],c=e[0]+o*(r[0]-e[0]),p=e[1]+o*(r[1]-e[1]),d=[c,p];return[h,d]},P.PlotUtils.getNormal=function(o,t,e){var r=o[0]-t[0],n=o[1]-t[1],g=Math.sqrt(r*r+n*n);r/=g,n/=g;var s=e[0]-t[0],i=e[1]-t[1],a=Math.sqrt(s*s+i*i);s/=a,i/=a;var l=r+s,u=n+i;return[l,u]},P.PlotUtils.getCurvePoints=function(o,t){for(var e=P.PlotUtils.getLeftMostControlPoint(t),r=[e],n=0;n<t.length-2;n++){var g=t[n],s=t[n+1],i=t[n+2],a=P.PlotUtils.getBisectorNormals(o,g,s,i);r=r.concat(a)}var l=P.PlotUtils.getRightMostControlPoint(t);r.push(l);var u=[];for(n=0;n<t.length-1;n++){g=t[n],s=t[n+1],u.push(g);for(var o=0;o<P.Constants.FITTING_COUNT;o++){var c=P.PlotUtils.getCubicValue(o/P.Constants.FITTING_COUNT,g,r[2*n],r[2*n+1],s);u.push(c)}u.push(s)}return u},P.PlotUtils.getLeftMostControlPoint=function(o){var e=o[0],r=o[1],n=o[2],g=P.PlotUtils.getBisectorNormals(0,e,r,n),s=g[0],i=P.PlotUtils.getNormal(e,r,n),a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(a>P.Constants.ZERO_TOLERANCE)var l=P.PlotUtils.mid(e,r),u=e[0]-l[0],c=e[1]-l[1],p=P.PlotUtils.distance(e,r),h=2/p,d=-h*c,f=h*u,E=d*d-f*f,v=2*d*f,A=f*f-d*d,_=s[0]-l[0],y=s[1]-l[1],O=l[0]+E*_+v*y,m=l[1]+v*_+A*y;else O=e[0]+t*(r[0]-e[0]),m=e[1]+t*(r[1]-e[1]);return[O,m]},P.PlotUtils.getRightMostControlPoint=function(o){var e=o.length,r=o[e-3],n=o[e-2],g=o[e-1],s=P.PlotUtils.getBisectorNormals(0,r,n,g),i=s[1],a=P.PlotUtils.getNormal(r,n,g),l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(l>P.Constants.ZERO_TOLERANCE)var u=P.PlotUtils.mid(n,g),c=g[0]-u[0],p=g[1]-u[1],h=P.PlotUtils.distance(n,g),d=2/h,f=-d*p,E=d*c,v=f*f-E*E,A=2*f*E,_=E*E-f*f,y=i[0]-u[0],O=i[1]-u[1],m=u[0]+v*y+A*O,T=u[1]+A*y+_*O;else m=g[0]+t*(n[0]-g[0]),T=g[1]+t*(n[1]-g[1]);return[m,T]},P.PlotUtils.getBezierPoints=function(o){if(o.length<=2)return o;for(var t=[],e=o.length-1,r=0;1>=r;r+=.01){for(var n=y=0,g=0;e>=g;g++){var s=P.PlotUtils.getBinomialFactor(e,g),i=Math.pow(r,g),a=Math.pow(1-r,e-g);n+=s*i*a*o[g][0],y+=s*i*a*o[g][1]}t.push([n,y])}return t.push(o[e]),t},P.PlotUtils.getBinomialFactor=function(o,t){return P.PlotUtils.getFactorial(o)/(P.PlotUtils.getFactorial(t)*P.PlotUtils.getFactorial(o-t))},P.PlotUtils.getFactorial=function(o){if(1>=o)return 1;if(2==o)return 2;if(3==o)return 6;if(4==o)return 24;if(5==o)return 120;for(var t=1,e=1;o>=e;e++)t*=e;return t},P.PlotUtils.getQBSplinePoints=function(o){if(o.length<=2)return o;var t=2,e=[],r=o.length-t-1;e.push(o[0]);for(var n=0;r>=n;n++)for(var g=0;1>=g;g+=.05){for(var s=y=0,i=0;t>=i;i++){var a=P.PlotUtils.getQuadricBSplineFactor(i,g);s+=a*o[n+i][0],y+=a*o[n+i][1]}e.push([s,y])}return e.push(o[o.length-1]),e},P.PlotUtils.getQuadricBSplineFactor=function(o,t){return 0==o?Math.pow(t-1,2)/2:1==o?(-2*Math.pow(t,2)+2*t+1)/2:2==o?Math.pow(t,2)/2:0},P.Event={},P.Event.EventType={},P.Event.EventType.MOUSEMOVE="mousemove",P.Event.EventType.MOUSEUP="mouseup",P.Event.EventType.MOUSEDOWN="mousedown",P.Event.PlotDrawEvent=function(o,t){goog.base(this,o),this.feature=t},goog.inherits(P.Event.PlotDrawEvent,goog.events.Event),P.Event.PlotDrawEvent.DRAW_START="draw_start",P.Event.PlotDrawEvent.DRAW_END="draw_end",P.Plot=function(o){this.setPoints(o)},P.Plot.prototype={isPlot:function(){return!0},setPoints:function(o){this.points=o?o:[],this.points.length>=2&&this.generate()},getPoints:function(){return this.points.slice(0)},getPointCount:function(){return this.points.length},updatePoint:function(o,t){t>=0&&t<this.points.length&&(this.points[t]=o,this.generate())},updateLastPoint:function(o){this.updatePoint(o,this.points.length-1)},generate:function(){},finishDrawing:function(){}},P.Plot.Arc=function(o){goog.base(this,[]),this.type=P.PlotTypes.ARC,this.fixPointCount=3,this.setPoints(o)},goog.inherits(P.Plot.Arc,ol.geom.LineString),goog.mixin(P.Plot.Arc.prototype,P.Plot.prototype),P.Plot.Arc.prototype.generate=function(){var o=this.getPointCount();if(!(2>o))if(2==o)this.setCoordinates(this.points);else{var t=this.points[0],e=this.points[1],r=this.points[2],n=P.PlotUtils.getCircleCenterOfThreePoints(t,e,r),g=P.PlotUtils.distance(t,n),s=P.PlotUtils.getAzimuth(t,n),i=P.PlotUtils.getAzimuth(e,n);if(P.PlotUtils.isClockWise(t,e,r))var a=i,l=s;else a=s,l=i;this.setCoordinates(P.PlotUtils.getArcPoints(n,g,a,l))}},P.Plot.AttackArrow=function(o){goog.base(this,[]),this.type=P.PlotTypes.ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.headTailFactor=.8,this.setPoints(o)},goog.inherits(P.Plot.AttackArrow,ol.geom.Polygon),goog.mixin(P.Plot.AttackArrow.prototype,P.Plot.prototype),P.Plot.AttackArrow.prototype.generate=function(){if(!(this.getPointCount()<2)){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var o=this.getPoints(),t=o[0],e=o[1];P.PlotUtils.isClockWise(o[0],o[1],o[2])&&(t=o[1],e=o[0]);var r=P.PlotUtils.mid(t,e),n=[r].concat(o.slice(2)),g=this.getArrowHeadPoints(n,t,e),s=g[0],i=g[4],a=P.PlotUtils.distance(t,e)/P.PlotUtils.getBaseLength(n),l=this.getArrowBodyPoints(n,s,i,a),u=l.length,c=[t].concat(l.slice(0,u/2));c.push(s);var p=[e].concat(l.slice(u/2,u));p.push(i),c=P.PlotUtils.getQBSplinePoints(c),p=P.PlotUtils.getQBSplinePoints(p),this.setCoordinates([c.concat(g,p.reverse())])}},P.Plot.AttackArrow.prototype.getArrowHeadPoints=function(o,t,e){var r=P.PlotUtils.getBaseLength(o),n=r*this.headHeightFactor,g=o[o.length-1];r=P.PlotUtils.distance(g,o[o.length-2]);var s=P.PlotUtils.distance(t,e);n>s*this.headTailFactor&&(n=s*this.headTailFactor);var i=n*this.headWidthFactor,a=n*this.neckWidthFactor;n=n>r?r:n;var l=n*this.neckHeightFactor,u=P.PlotUtils.getThirdPoint(o[o.length-2],g,0,n,!0),c=P.PlotUtils.getThirdPoint(o[o.length-2],g,0,l,!0),p=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,i,!1),h=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,i,!0),d=P.PlotUtils.getThirdPoint(g,c,P.Constants.HALF_PI,a,!1),f=P.PlotUtils.getThirdPoint(g,c,P.Constants.HALF_PI,a,!0);return[d,p,g,h,f]},P.Plot.AttackArrow.prototype.getArrowBodyPoints=function(o,t,e,r){for(var n=P.PlotUtils.wholeDistance(o),g=P.PlotUtils.getBaseLength(o),s=g*r,i=P.PlotUtils.distance(t,e),a=(s-i)/2,l=0,u=[],c=[],p=1;p<o.length-1;p++){var h=P.PlotUtils.getAngleOfThreePoints(o[p-1],o[p],o[p+1])/2;l+=P.PlotUtils.distance(o[p-1],o[p]);var d=(s/2-l/n*a)/Math.sin(h),f=P.PlotUtils.getThirdPoint(o[p-1],o[p],Math.PI-h,d,!0),E=P.PlotUtils.getThirdPoint(o[p-1],o[p],h,d,!1);u.push(f),c.push(E)}return u.concat(c)},P.Plot.SquadCombat=function(o){goog.base(this,[]),this.type=P.PlotTypes.SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.setPoints(o)},goog.inherits(P.Plot.SquadCombat,P.Plot.AttackArrow),P.Plot.SquadCombat.prototype.generate=function(){var o=this.getPoints(),t=this.getTailPoints(o),e=this.getArrowHeadPoints(o,t[0],t[1]),r=e[0],n=e[4],g=this.getArrowBodyPoints(o,r,n,this.tailWidthFactor),s=g.length,i=[t[0]].concat(g.slice(0,s/2));i.push(r);var a=[t[1]].concat(g.slice(s/2,s));a.push(n),i=P.PlotUtils.getQBSplinePoints(i),a=P.PlotUtils.getQBSplinePoints(a),this.setCoordinates([i.concat(e,a.reverse())])},P.Plot.SquadCombat.prototype.getTailPoints=function(o){var t=P.PlotUtils.getBaseLength(o),e=t*this.tailWidthFactor,r=P.PlotUtils.getThirdPoint(o[1],o[0],P.Constants.HALF_PI,e,!1),n=P.PlotUtils.getThirdPoint(o[1],o[0],P.Constants.HALF_PI,e,!0);return[r,n]},P.Plot.TailedAttackArrow=function(o){goog.base(this,[]),this.type=P.PlotTypes.TAILED_ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.headTailFactor=.8,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(o)},goog.inherits(P.Plot.TailedAttackArrow,P.Plot.AttackArrow),P.Plot.TailedAttackArrow.prototype.generate=function(){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var o=this.getPoints(),t=o[0],e=o[1];P.PlotUtils.isClockWise(o[0],o[1],o[2])&&(t=o[1],e=o[0]);var r=P.PlotUtils.mid(t,e),n=[r].concat(o.slice(2)),g=this.getArrowHeadPoints(n,t,e),s=g[0],i=g[4],a=P.PlotUtils.distance(t,e),l=P.PlotUtils.getBaseLength(n),u=l*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=P.PlotUtils.getThirdPoint(n[1],n[0],0,u,!0);var c=a/l,p=this.getArrowBodyPoints(n,s,i,c),h=p.length,d=[t].concat(p.slice(0,h/2));d.push(s);var f=[e].concat(p.slice(h/2,h));f.push(i),d=P.PlotUtils.getQBSplinePoints(d),f=P.PlotUtils.getQBSplinePoints(f),this.setCoordinates([d.concat(g,f.reverse(),[this.swallowTailPnt,d[0]])])},P.Plot.TailedSquadCombat=function(o){goog.base(this,[]),this.type=P.PlotTypes.TAILED_SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(o)},goog.inherits(P.Plot.TailedSquadCombat,P.Plot.AttackArrow),P.Plot.TailedSquadCombat.prototype.generate=function(){var o=this.getPoints(),t=this.getTailPoints(o),e=this.getArrowHeadPoints(o,t[0],t[2]),r=e[0],n=e[4],g=this.getArrowBodyPoints(o,r,n,this.tailWidthFactor),s=g.length,i=[t[0]].concat(g.slice(0,s/2));i.push(r);var a=[t[2]].concat(g.slice(s/2,s));a.push(n),i=P.PlotUtils.getQBSplinePoints(i),a=P.PlotUtils.getQBSplinePoints(a),this.setCoordinates([i.concat(e,a.reverse(),[t[1],i[0]])])},P.Plot.TailedSquadCombat.prototype.getTailPoints=function(o){var t=P.PlotUtils.getBaseLength(o),e=t*this.tailWidthFactor,r=P.PlotUtils.getThirdPoint(o[1],o[0],P.Constants.HALF_PI,e,!1),n=P.PlotUtils.getThirdPoint(o[1],o[0],P.Constants.HALF_PI,e,!0),g=e*this.swallowTailFactor,s=P.PlotUtils.getThirdPoint(o[1],o[0],0,g,!0);return[r,s,n]},P.Plot.Circle=function(o){goog.base(this,[]),this.type=P.PlotTypes.CIRCLE,this.fixPointCount=2,this.setPoints(o)},goog.inherits(P.Plot.Circle,ol.geom.Polygon),goog.mixin(P.Plot.Circle.prototype,P.Plot.prototype),P.Plot.Circle.prototype.generate=function(){var o=this.points[0],t=P.PlotUtils.distance(o,this.points[1]);this.setCoordinates([this.generatePoints(o,t)])},P.Plot.Circle.prototype.generatePoints=function(o,t){for(var e,r,n,g=[],s=0;s<=P.Constants.FITTING_COUNT;s++)n=2*Math.PI*s/P.Constants.FITTING_COUNT,e=o[0]+t*Math.cos(n),r=o[1]+t*Math.sin(n),g.push([e,r]);return g},P.Plot.ClosedCurve=function(o){goog.base(this,[]),this.type=P.PlotTypes.CLOSED_CURVE,this.t=.3,this.setPoints(o)},goog.inherits(P.Plot.ClosedCurve,ol.geom.Polygon),goog.mixin(P.Plot.ClosedCurve.prototype,P.Plot.prototype),P.Plot.ClosedCurve.prototype.generate=function(){if(2==this.getPointCount())this.setCoordinates([this.points]);else{var o=this.getPoints();o.push(o[0],o[1]);for(var t=[],e=0;e<o.length-2;e++){var r=P.PlotUtils.getBisectorNormals(this.t,o[e],o[e+1],o[e+2]);t=t.concat(r)}var n=t.length;t=[t[n-1]].concat(t.slice(0,n-1));var g=[];for(e=0;e<o.length-2;e++){var s=o[e],i=o[e+1];g.push(s);for(var a=0;a<=P.Constants.FITTING_COUNT;a++){var l=P.PlotUtils.getCubicValue(a/P.Constants.FITTING_COUNT,s,t[2*e],t[2*e+1],i);g.push(l)}g.push(i)}this.setCoordinates([g])}},P.Plot.Curve=function(o){goog.base(this,[]),this.type=P.PlotTypes.CURVE,this.t=.3,this.setPoints(o)},goog.inherits(P.Plot.Curve,ol.geom.LineString),goog.mixin(P.Plot.Curve.prototype,P.Plot.prototype),P.Plot.Curve.prototype.generate=function(){2==this.getPointCount()?this.setCoordinates(this.points):this.setCoordinates(P.PlotUtils.getCurvePoints(this.t,this.points))},P.Plot.DoubleArrow=function(o){goog.base(this,[]),this.type=P.PlotTypes.DOUBLE_ARROW,this.headHeightFactor=.25,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.connPoint=null,this.tempPoint4=null,this.fixPointCount=4,this.setPoints(o)},goog.inherits(P.Plot.DoubleArrow,ol.geom.Polygon),goog.mixin(P.Plot.DoubleArrow.prototype,P.Plot.prototype),P.Plot.DoubleArrow.prototype.finishDrawing=function(){3==this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4),null!=this.connPoint&&this.points.push(this.connPoint)},P.Plot.DoubleArrow.prototype.generate=function(){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var o=this.points[0],t=this.points[1],e=this.points[2],r=this.getPointCount();
3==r?this.tempPoint4=this.getTempPoint4(o,t,e):this.tempPoint4=this.points[3],3==r||4==r?this.connPoint=P.PlotUtils.mid(o,t):this.connPoint=this.points[4];var n,g;P.PlotUtils.isClockWise(o,t,e)?(n=this.getArrowPoints(o,this.connPoint,this.tempPoint4,!1),g=this.getArrowPoints(this.connPoint,t,e,!0)):(n=this.getArrowPoints(t,this.connPoint,e,!1),g=this.getArrowPoints(this.connPoint,o,this.tempPoint4,!0));var s=n.length,i=(s-5)/2,a=n.slice(0,i),l=n.slice(i,i+5),u=n.slice(i+5,s),c=g.slice(0,i),p=g.slice(i,i+5),h=g.slice(i+5,s);c=P.PlotUtils.getBezierPoints(c);var d=P.PlotUtils.getBezierPoints(h.concat(a.slice(1)));u=P.PlotUtils.getBezierPoints(u);var f=c.concat(p,d,l,u);this.setCoordinates([f])},P.Plot.DoubleArrow.prototype.getArrowPoints=function(o,t,e,r){var n=P.PlotUtils.mid(o,t),g=P.PlotUtils.distance(n,e),s=P.PlotUtils.getThirdPoint(e,n,0,.3*g,!0),i=P.PlotUtils.getThirdPoint(e,n,0,.5*g,!0);s=P.PlotUtils.getThirdPoint(n,s,P.Constants.HALF_PI,g/5,r),i=P.PlotUtils.getThirdPoint(n,i,P.Constants.HALF_PI,g/4,r);var a=[n,s,i,e],l=this.getArrowHeadPoints(a,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),u=l[0],c=l[4],p=P.PlotUtils.distance(o,t)/P.PlotUtils.getBaseLength(a)/2,h=this.getArrowBodyPoints(a,u,c,p),d=h.length,f=h.slice(0,d/2),E=h.slice(d/2,d);return f.push(u),E.push(c),f=f.reverse(),f.push(t),E=E.reverse(),E.push(o),f.reverse().concat(l,E)},P.Plot.DoubleArrow.prototype.getArrowHeadPoints=function(o,t,e){var r=P.PlotUtils.getBaseLength(o),n=r*this.headHeightFactor,g=o[o.length-1],s=(P.PlotUtils.distance(t,e),n*this.headWidthFactor),i=n*this.neckWidthFactor,a=n*this.neckHeightFactor,l=P.PlotUtils.getThirdPoint(o[o.length-2],g,0,n,!0),u=P.PlotUtils.getThirdPoint(o[o.length-2],g,0,a,!0),c=P.PlotUtils.getThirdPoint(g,l,P.Constants.HALF_PI,s,!1),p=P.PlotUtils.getThirdPoint(g,l,P.Constants.HALF_PI,s,!0),h=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,i,!1),d=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,i,!0);return[h,c,g,p,d]},P.Plot.DoubleArrow.prototype.getArrowBodyPoints=function(o,t,e,r){for(var n=P.PlotUtils.wholeDistance(o),g=P.PlotUtils.getBaseLength(o),s=g*r,i=P.PlotUtils.distance(t,e),a=(s-i)/2,l=0,u=[],c=[],p=1;p<o.length-1;p++){var h=P.PlotUtils.getAngleOfThreePoints(o[p-1],o[p],o[p+1])/2;l+=P.PlotUtils.distance(o[p-1],o[p]);var d=(s/2-l/n*a)/Math.sin(h),f=P.PlotUtils.getThirdPoint(o[p-1],o[p],Math.PI-h,d,!0),E=P.PlotUtils.getThirdPoint(o[p-1],o[p],h,d,!1);u.push(f),c.push(E)}return u.concat(c)},P.Plot.DoubleArrow.prototype.getTempPoint4=function(o,t,e){var r,n,g,s,i=P.PlotUtils.mid(o,t),a=P.PlotUtils.distance(i,e),l=P.PlotUtils.getAngleOfThreePoints(o,i,e);return l<P.Constants.HALF_PI?(n=a*Math.sin(l),g=a*Math.cos(l),s=P.PlotUtils.getThirdPoint(o,i,P.Constants.HALF_PI,n,!1),r=P.PlotUtils.getThirdPoint(i,s,P.Constants.HALF_PI,g,!0)):l>=P.Constants.HALF_PI&&l<Math.PI?(n=a*Math.sin(Math.PI-l),g=a*Math.cos(Math.PI-l),s=P.PlotUtils.getThirdPoint(o,i,P.Constants.HALF_PI,n,!1),r=P.PlotUtils.getThirdPoint(i,s,P.Constants.HALF_PI,g,!1)):l>=Math.PI&&l<1.5*Math.PI?(n=a*Math.sin(l-Math.PI),g=a*Math.cos(l-Math.PI),s=P.PlotUtils.getThirdPoint(o,i,P.Constants.HALF_PI,n,!0),r=P.PlotUtils.getThirdPoint(i,s,P.Constants.HALF_PI,g,!0)):(n=a*Math.sin(2*Math.PI-l),g=a*Math.cos(2*Math.PI-l),s=P.PlotUtils.getThirdPoint(o,i,P.Constants.HALF_PI,n,!0),r=P.PlotUtils.getThirdPoint(i,s,P.Constants.HALF_PI,g,!1)),r},P.Plot.Ellipse=function(o){goog.base(this,[]),this.type=P.PlotTypes.ELLIPSE,this.fixPointCount=2,this.setPoints(o)},goog.inherits(P.Plot.Ellipse,ol.geom.Polygon),goog.mixin(P.Plot.Ellipse.prototype,P.Plot.prototype),P.Plot.Ellipse.prototype.generate=function(){if(!(this.getPointCount()<2)){var o=this.points[0],t=this.points[1],e=P.PlotUtils.mid(o,t),r=Math.abs((o[0]-t[0])/2),n=Math.abs((o[1]-t[1])/2);this.setCoordinates([this.generatePoints(e,r,n)])}},P.Plot.Ellipse.prototype.generatePoints=function(o,t,e){for(var r,n,g,s=[],i=0;i<=P.Constants.FITTING_COUNT;i++)g=2*Math.PI*i/P.Constants.FITTING_COUNT,r=o[0]+t*Math.cos(g),n=o[1]+e*Math.sin(g),s.push([r,n]);return s},P.Plot.FineArrow=function(o){goog.base(this,[]),this.type=P.PlotTypes.FINE_ARROW,this.tailWidthFactor=.15,this.neckWidthFactor=.2,this.headWidthFactor=.25,this.headAngle=Math.PI/8.5,this.neckAngle=Math.PI/13,this.fixPointCount=2,this.setPoints(o)},goog.inherits(P.Plot.FineArrow,ol.geom.Polygon),goog.mixin(P.Plot.FineArrow.prototype,P.Plot.prototype),P.Plot.FineArrow.prototype.generate=function(){var o=this.getPoints(),t=o[0],e=o[1],r=P.PlotUtils.getBaseLength(o),n=r*this.tailWidthFactor,g=r*this.neckWidthFactor,s=r*this.headWidthFactor,i=P.PlotUtils.getThirdPoint(e,t,P.Constants.HALF_PI,n,!0),a=P.PlotUtils.getThirdPoint(e,t,P.Constants.HALF_PI,n,!1),l=P.PlotUtils.getThirdPoint(t,e,this.headAngle,s,!1),u=P.PlotUtils.getThirdPoint(t,e,this.headAngle,s,!0),c=P.PlotUtils.getThirdPoint(t,e,this.neckAngle,g,!1),p=P.PlotUtils.getThirdPoint(t,e,this.neckAngle,g,!0),h=[i,c,l,e,u,p,a];this.setCoordinates([h])},P.Plot.AssaultDirection=function(o){goog.base(this,[]),this.type=P.PlotTypes.ASSAULT_DIRECTION,this.tailWidthFactor=.2,this.neckWidthFactor=.25,this.headWidthFactor=.3,this.headAngle=Math.PI/4,this.neckAngle=.17741*Math.PI,this.setPoints(o)},goog.inherits(P.Plot.AssaultDirection,P.Plot.FineArrow),P.Plot.GatheringPlace=function(o){goog.base(this,[]),this.type=P.PlotTypes.GATHERING_PLACE,this.t=.4,this.fixPointCount=3,this.setPoints(o)},goog.inherits(P.Plot.GatheringPlace,ol.geom.Polygon),goog.mixin(P.Plot.GatheringPlace.prototype,P.Plot.prototype),P.Plot.GatheringPlace.prototype.generate=function(){var o=this.getPoints();if(!(o.length<2)){if(2==this.getPointCount()){var t=P.PlotUtils.mid(o[0],o[1]),e=P.PlotUtils.distance(o[0],t)/.9,r=P.PlotUtils.getThirdPoint(o[0],t,P.Constants.HALF_PI,e,!0);o=[o[0],r,o[1]]}var t=P.PlotUtils.mid(o[0],o[2]);o.push(t,o[0],o[1]);for(var n=[],g=0;g<o.length-2;g++){var s=o[g],i=o[g+1],a=o[g+2],l=P.PlotUtils.getBisectorNormals(this.t,s,i,a);n=n.concat(l)}var u=n.length;n=[n[u-1]].concat(n.slice(0,u-1));var c=[];for(g=0;g<o.length-2;g++){s=o[g],i=o[g+1],c.push(s);for(var p=0;p<=P.Constants.FITTING_COUNT;p++){var r=P.PlotUtils.getCubicValue(p/P.Constants.FITTING_COUNT,s,n[2*g],n[2*g+1],i);c.push(r)}c.push(i)}this.setCoordinates([c])}},P.Plot.Lune=function(o){goog.base(this,[]),this.type=P.PlotTypes.LUNE,this.fixPointCount=3,this.setPoints(o)},goog.inherits(P.Plot.Lune,ol.geom.Polygon),goog.mixin(P.Plot.Lune.prototype,P.Plot.prototype),P.Plot.Lune.prototype.generate=function(){if(!(this.getPointCount()<2)){var o=this.getPoints();if(2==this.getPointCount()){var t=P.PlotUtils.mid(o[0],o[1]),e=P.PlotUtils.distance(o[0],t),r=P.PlotUtils.getThirdPoint(o[0],t,P.Constants.HALF_PI,e);o.push(r)}var n=o[0],g=o[1],s=o[2],i=P.PlotUtils.getCircleCenterOfThreePoints(n,g,s),a=P.PlotUtils.distance(n,i),l=P.PlotUtils.getAzimuth(n,i),u=P.PlotUtils.getAzimuth(g,i);if(P.PlotUtils.isClockWise(n,g,s))var c=u,p=l;else c=l,p=u;var o=P.PlotUtils.getArcPoints(i,a,c,p);o.push(o[0]),this.setCoordinates([o])}},P.Plot.Sector=function(o){goog.base(this,[]),this.type=P.PlotTypes.SECTOR,this.fixPointCount=3,this.setPoints(o)},goog.inherits(P.Plot.Sector,ol.geom.Polygon),goog.mixin(P.Plot.Sector.prototype,P.Plot.prototype),P.Plot.Sector.prototype.generate=function(){if(!(this.getPointCount()<2))if(2==this.getPointCount())this.setCoordinates([this.points]);else{var o=this.getPoints(),t=o[0],e=o[1],r=o[2],n=P.PlotUtils.distance(e,t),g=P.PlotUtils.getAzimuth(e,t),s=P.PlotUtils.getAzimuth(r,t),i=P.PlotUtils.getArcPoints(t,n,g,s);i.push(t,i[0]),this.setCoordinates([i])}},P.Plot.StraightArrow=function(o){goog.base(this,[]),this.type=P.PlotTypes.STRAIGHT_ARROW,this.fixPointCount=2,this.maxArrowLength=3e6,this.arrowLengthScale=5,this.setPoints(o)},goog.inherits(P.Plot.StraightArrow,ol.geom.LineString),goog.mixin(P.Plot.StraightArrow.prototype,P.Plot.prototype),P.Plot.StraightArrow.prototype.generate=function(){if(!(this.getPointCount()<2)){var o=this.getPoints(),t=o[0],e=o[1],r=P.PlotUtils.distance(t,e),n=r/this.arrowLengthScale;n=n>this.maxArrowLength?this.maxArrowLength:n;var g=P.PlotUtils.getThirdPoint(t,e,Math.PI/6,n,!1),s=P.PlotUtils.getThirdPoint(t,e,Math.PI/6,n,!0);this.setCoordinates([t,e,g,e,s])}},P.Plot.Polyline=function(o){goog.base(this,[]),this.type=P.PlotTypes.POLYLINE,this.setPoints(o)},goog.inherits(P.Plot.Polyline,ol.geom.LineString),goog.mixin(P.Plot.Polyline.prototype,P.Plot.prototype),P.Plot.Polyline.prototype.generate=function(){this.setCoordinates(this.points)},P.Plot.Polygon=function(o){goog.base(this,[]),this.type=P.PlotTypes.POLYGON,this.setPoints(o)},goog.inherits(P.Plot.Polygon,ol.geom.Polygon),goog.mixin(P.Plot.Polygon.prototype,P.Plot.prototype),P.Plot.Polygon.prototype.generate=function(){this.setCoordinates([this.points])},P.Plot.FreehandLine=function(o){goog.base(this,[]),this.type=P.PlotTypes.FREEHAND_LINE,this.freehand=!0,this.setPoints(o)},goog.inherits(P.Plot.FreehandLine,ol.geom.LineString),goog.mixin(P.Plot.FreehandLine.prototype,P.Plot.prototype),P.Plot.FreehandLine.prototype.generate=function(){this.setCoordinates(this.points)},P.Plot.FreehandPolygon=function(o){goog.base(this,[]),this.type=P.PlotTypes.FREEHAND_POLYGON,this.freehand=!0,this.setPoints(o)},goog.inherits(P.Plot.FreehandPolygon,ol.geom.Polygon),goog.mixin(P.Plot.FreehandPolygon.prototype,P.Plot.prototype),P.Plot.FreehandPolygon.prototype.generate=function(){this.setCoordinates([this.points])},P.PlotFactory={},P.PlotFactory.createPlot=function(o,t){switch(o){case P.PlotTypes.ARC:return new P.Plot.Arc(t);case P.PlotTypes.ELLIPSE:return new P.Plot.Ellipse(t);case P.PlotTypes.CURVE:return new P.Plot.Curve(t);case P.PlotTypes.CLOSED_CURVE:return new P.Plot.ClosedCurve(t);case P.PlotTypes.LUNE:return new P.Plot.Lune(t);case P.PlotTypes.SECTOR:return new P.Plot.Sector(t);case P.PlotTypes.GATHERING_PLACE:return new P.Plot.GatheringPlace(t);case P.PlotTypes.STRAIGHT_ARROW:return new P.Plot.StraightArrow(t);case P.PlotTypes.ASSAULT_DIRECTION:return new P.Plot.AssaultDirection(t);case P.PlotTypes.ATTACK_ARROW:return new P.Plot.AttackArrow(t);case P.PlotTypes.FINE_ARROW:return new P.Plot.FineArrow(t);case P.PlotTypes.CIRCLE:return new P.Plot.Circle(t);case P.PlotTypes.DOUBLE_ARROW:return new P.Plot.DoubleArrow(t);case P.PlotTypes.TAILED_ATTACK_ARROW:return new P.Plot.TailedAttackArrow(t);case P.PlotTypes.SQUAD_COMBAT:return new P.Plot.SquadCombat(t);case P.PlotTypes.TAILED_SQUAD_COMBAT:return new P.Plot.TailedSquadCombat(t);case P.PlotTypes.FREEHAND_LINE:return new P.Plot.FreehandLine(t);case P.PlotTypes.FREEHAND_POLYGON:return new P.Plot.FreehandPolygon(t);case P.PlotTypes.POLYGON:return new P.Plot.Polygon(t);case P.PlotTypes.POLYLINE:return new P.Plot.Polyline(t)}return null},P.PlotEdit=function(o){o&&(goog.base(this,[]),this.activePlot=null,this.startPoint=null,this.ghostControlPoints=null,this.controlPoints=null,this.map=o,this.mapViewport=this.map.getViewport(),this.mouseOver=!1,this.elementTable={},this.activeControlPointId=null,this.mapDragPan=null)},goog.inherits(P.PlotEdit,ol.Observable),P.PlotEdit.prototype.Constants={HELPER_HIDDEN_DIV:"p-helper-hidden-div",HELPER_CONTROL_POINT_DIV:"p-helper-control-point-div"},P.PlotEdit.prototype.initHelperDom=function(){if(this.map&&this.activePlot){var o=this.getMapParentElement();if(o)for(var t=P.DomUtils.createHidden("div",o,this.Constants.HELPER_HIDDEN_DIV),e=this.getControlPoints(),r=0;r<e.length;r++){var n=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+r;P.DomUtils.create("div",this.Constants.HELPER_CONTROL_POINT_DIV,t,n),this.elementTable[n]=r}}},P.PlotEdit.prototype.getMapParentElement=function(){var o=this.map.getTargetElement();if(o)return o.parentNode},P.PlotEdit.prototype.destroyHelperDom=function(){if(this.controlPoints){for(var o=0;o<this.controlPoints.length;o++){this.map.removeOverlay(this.controlPoints[o]);var t=P.DomUtils.get(this.Constants.HELPER_CONTROL_POINT_DIV+"-"+o);t&&P.DomUtils.removeListener(t,"mousedown",this.controlPointMouseDownHandler,this)}this.controlPoints=null}var e=this.getMapParentElement(),r=P.DomUtils.get(this.Constants.HELPER_HIDDEN_DIV);r&&e&&P.DomUtils.remove(r,e)},P.PlotEdit.prototype.initControlPoints=function(){if(this.map){this.controlPoints=[];for(var o=this.getControlPoints(),t=0;t<o.length;t++){var e=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+t,r=P.DomUtils.get(e),n=new ol.Overlay({id:e,position:o[t],positioning:"center-center",element:r});this.controlPoints.push(n),this.map.addOverlay(n),P.DomUtils.addListener(r,"mousedown",this.controlPointMouseDownHandler,this)}}},P.PlotEdit.prototype.controlPointMouseDownHandler=function(o){var t=o.target.id;this.activeControlPointId=t,goog.events.listen(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.listen(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},P.PlotEdit.prototype.controlPointMouseMoveHandler=function(o){var t=map.getCoordinateFromPixel([o.clientX,o.clientY]);if(this.activeControlPointId){var e=this.activePlot.getGeometry(),r=this.elementTable[this.activeControlPointId];e.updatePoint(t,r);var n=this.map.getOverlayById(this.activeControlPointId);n.setPosition(t)}},P.PlotEdit.prototype.controlPointMouseUpHandler=function(o){goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},P.PlotEdit.prototype.activate=function(o){if(o&&o instanceof ol.Feature&&o!=this.activePlot){var t=o.getGeometry();t.isPlot()&&(this.deactivate(),this.activePlot=o,this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints())}},P.PlotEdit.prototype.getControlPoints=function(){if(!this.activePlot)return[];var o=this.activePlot.getGeometry();return o.getPoints()},P.PlotEdit.prototype.plotMouseOverOutHandler=function(o){var t=map.forEachFeatureAtPixel(o.pixel,function(o,t){return o});t&&t==this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getViewport().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getViewport().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this))},P.PlotEdit.prototype.plotMouseDownHandler=function(o){this.ghostControlPoints=this.getControlPoints(),this.startPoint=o.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.plotMouseMoveHandler=function(o){for(var t=o.coordinate,e=t[0]-this.startPoint[0],r=t[1]-this.startPoint[1],n=[],g=0;g<this.ghostControlPoints.length;g++){var s=this.ghostControlPoints[g],i=[s[0]+e,s[1]+r];n.push(i);var a=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+g,l=this.map.getOverlayById(a);l.setPosition(i),l.setPositioning("center-center")}var u=this.activePlot.getGeometry();u.setPoints(n)},P.PlotEdit.prototype.plotMouseUpHandler=function(o){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.disconnectEventHandlers=function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.deactivate=function(){this.activePlot=null,this.mouseOver=!1,this.destroyHelperDom(),this.disconnectEventHandlers(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null},P.PlotEdit.prototype.disableMapDragPan=function(){for(var o=this.map.getInteractions(),t=o.getLength(),e=0;t>e;e++){var r=o.item(e);if(r instanceof ol.interaction.DragPan){this.mapDragPan=r,r.setActive(!1);break}}},P.PlotEdit.prototype.enableMapDragPan=function(){null!=this.mapDragPan&&(this.mapDragPan.setActive(!0),this.mapDragPan=null)};